{"version":3,"sources":["../src/index.ts","../src/register.ts","../src/wallet.ts","../src/abstract-wallet.ts","../src/api/dscvr.ts"],"sourcesContent":["export * as CanvasInterface from '@dscvr-one/canvas-wallet-interface';\nexport { registerCanvasWallet } from './register';\nexport { CANVAS_WALLET_NAME, type CanvasWallet } from './wallet';\n","import { getWallets } from '@wallet-standard/core';\nimport { registerWallet } from '@wallet-standard/wallet';\nimport type { CanvasClient } from '@dscvr-one/canvas-client-sdk';\nimport { CANVAS_WALLET_NAME, CanvasWallet } from './wallet';\n\nexport const registerCanvasWallet = (canvasClient: CanvasClient) => {\n  const { get } = getWallets();\n  const wallets = get();\n  const exists = wallets.find((wallet) => wallet.name === CANVAS_WALLET_NAME);\n  if (exists) {\n    // Since the user could potentially instantiate the canvas client more than once\n    // we need to update the canvas client in the wallet\n    // A common scenario is React testing environment that calls hooks twice.\n    (exists as CanvasWallet).setCanvasClient(canvasClient);\n    return exists;\n  }\n\n  const wallet = new CanvasWallet(canvasClient);\n  registerWallet(wallet);\n  return wallet;\n};\n","import * as bs58 from 'bs58';\nimport {\n  getEndpointForChain,\n  SOLANA_CHAINS,\n  type SolanaChain,\n  type SolanaSignAndSendTransactionFeature,\n  type SolanaSignAndSendTransactionMethod,\n  type SolanaSignAndSendTransactionOutput,\n  type SolanaSignMessageFeature,\n  type SolanaSignMessageMethod,\n  type SolanaSignMessageOutput,\n  type SolanaSignTransactionFeature,\n  type SolanaSignTransactionMethod,\n  type SolanaSignTransactionOutput,\n} from '@solana/wallet-standard';\nimport { PublicKey } from '@solana/web3.js';\nimport type {\n  StandardConnectFeature,\n  StandardConnectMethod,\n  StandardDisconnectFeature,\n  StandardDisconnectMethod,\n  StandardEventsFeature,\n  Wallet,\n  WalletAccount,\n} from '@wallet-standard/core';\nimport type { WalletName } from '@solana/wallet-adapter-base';\nimport type { CanvasClient } from '@dscvr-one/canvas-client-sdk';\nimport * as CanvasInterface from '@dscvr-one/canvas-wallet-interface';\nimport { AbstractWallet } from './abstract-wallet';\nimport { validateHostMessage } from './api/dscvr';\n\n// source: https://github.com/wallet-standard/wallet-standard/blob/master/packages/example/wallets/src/solanaWallet.ts\n\nexport const CANVAS_WALLET_NAME = 'DSCVR Canvas' as WalletName;\nexport class CanvasWallet extends AbstractWallet implements Wallet {\n  #underlyingWalletName: string | undefined;\n  #name = CANVAS_WALLET_NAME;\n  #icon =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEwOCIgdmlld0JveD0iMCAwIDEwOCAxMDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wIDE2QzAgNy4xNjM0NCA3LjE2MzQ0IDAgMTYgMEg5MkMxMDAuODM3IDAgMTA4IDcuMTYzNDQgMTA4IDE2VjkyQzEwOCAxMDAuODM3IDEwMC44MzcgMTA4IDkyIDEwOEgxNkM3LjE2MzQ0IDEwOCAwIDEwMC44MzcgMCA5MlYxNloiIGZpbGw9IiM0RjQ2RTUiLz4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzMDgwXzE3NjQ1KSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNODcuOTE2NyA1My45OTY2Qzg3LjkxNjcgNjMuMDIyIDg0LjM2MzIgNzEuNjAwNyA3Ny45ODA2IDc3Ljk4MjRDNzEuNjAzIDg0LjM2MjQgNjMuMDI1NCA4Ny45MTYzIDU0LjAwMTIgODcuOTE2M0M1MC4xNDQ4IDg3LjkxNjMgNDYuMzcwNSA4Ny4yNjg4IDQyLjgxMzcgODYuMDI4OUMzOC4wNDcyIDg0LjM2MjQgMzMuNjcyMyA4MS42MzY3IDMwLjAxODQgNzcuOTgyNEMyMy42MzU4IDcxLjYwMDcgMjAuMDg0IDYzLjAyMzcgMjAuMDg0IDUzLjk5NjZDMjAuMDg0IDUwLjA1NDUgMjAuNzY0OSA0Ni4xNTA5IDIyLjEwNjcgNDIuNDQ0N0MyMi40OTMxIDQxLjM4MjIgMjIuOTMxNSA0MC4zMzk4IDIzLjQyMTcgMzkuMzE5MUwyMy44NiAzOC40MDM4TDI0LjEyOTQgMzguNTE0M0MyNS4wMjYxIDM4Ljg4NDEgMjUuNDg0NSAzOS44NzQ2IDI1LjE4NjcgNDAuNzk5OUMyMC41MjA2IDU1LjI1MTYgMjUuNzk5IDcxLjMyMTMgMzkuNTg2NCA3OC40NTkzQzUwLjc0NTUgODQuMjMzNiA2NC43MDY4IDgyLjY5NTkgNzMuNzAxIDczLjcwMDZDNzUuNjQxNyA3MS43NTk2IDc3LjI2NDUgNjkuNTcxMSA3OC41Mzk0IDY3LjIwODVDNzguOTg0NCA2Ni4zODAyIDc5LjM4OTMgNjUuNTMwMiA3OS43NDczIDY0LjY2MzVDODEuMTMyNiA2MS4zMjA0IDgxLjg2MDMgNTcuNzA0NSA4MS44NjAzIDUzLjk5NjZDODEuODYwMyA0Ni41ODA5IDc4Ljk0MjYgMzkuNTM2NiA3My43MDEgMzQuMjkyN0M2OC40NTk0IDI5LjA1MDUgNjEuNDE0MyAyNi4xMzI0IDU0LjAwMTIgMjYuMTMyNEM1MS41NTE5IDI2LjEzMjQgNDkuMTE0MyAyNi40NDUzIDQ2Ljc3NTQgMjcuMDc0NEw0NS41MjkgMjcuNDQwOEM0MS43NjggMjkuMjAyOCAzOC41Njc1IDMyLjAwODggMzYuMzE5IDM1LjUwMjVDMzQuMDMzNiAzOS4wNTk3IDMyLjg0MDggNDMuMTY3NSAzMi44NDA4IDQ3LjM5NzRDMzIuODQwOCA0OC4xNzIxIDMyLjg3OTMgNDguOTQxOCAzMi45NTk2IDQ5LjcwMzFDMzMuNDcxNSA1NC42MTQxIDM1LjYwOCA1OS4yMDM3IDM5LjA5NzkgNjIuNzc5NEM0Ni4xODY1IDcwLjA0MTIgNjAuNzg4NiA3MC41NzUgNjUuODgzIDYwLjgzMThDNjguMjgyMSA1Ni4yMzM4IDY3Ljg0ODggNTAuNjkyIDY0Ljc0MiA0Ni41MzkxQzYxLjA2OCA0MS42MzE1IDU1LjIyMjUgNDAuNDY4NiA0OS42MzQ2IDQyLjI4NEg0OS42MzI5TDUwLjAwNiA2NS44MTNDNDcuMzc2IDY1LjI4MjYgNDQuMzI0NCA2NC4yMzY4IDQxLjgzMTYgNjEuNjQ2Nkw0MS41MjM4IDUyLjE4NzlMNDEuMDExOCAzNi41NjMzTDQxLjYxNzUgMzYuMjUwNEM1MS4zOTYzIDMxLjE4MDUgNjAuOTAyNCAzMC41NDY0IDY5LjE3MzggMzguODIwNUM3My4yMTA4IDQyLjg1OTYgNzUuNDU3NyA0OC4yODU5IDc1LjQ1NzcgNTMuOTk2NkM3NS40NTc3IDU5LjcwNzQgNzMuMjA5MSA2NS4xMzUzIDY5LjE3MzggNjkuMTcxMkM1OS4zMjE0IDc5LjAyODEgNDMuOTI0NiA3Ni4zNzYxIDM0Ljc2NDggNjYuOTk0M0MyOS42MzM2IDYxLjczODcgMjYuNzgyOCA1NC43NDYzIDI2Ljc4MjggNDcuMzk3NEMyNi43ODI4IDQ0LjQ4OTQgMjcuMjMxMSA0MS42MDE0IDI4LjEyNjIgMzguODAzN0MzMS40NzIyIDI5LjMwNDggMzguMjc4MSAyMi44NzYzIDQ3LjQ0MjkgMjAuODA2NUM0OS41MTI0IDIwLjMzOCA1MS43MDA4IDIwLjA5MzcgNTMuOTk2MSAyMC4wODM3QzU0LjM2NzYgMjAuMDgzNyA1NC43MzczIDIwLjA4MiA1NS4xMDU0IDIwLjA5MzdDNjMuNzM4MiAyMC4zNjgxIDcxLjg3NzQgMjMuOTA1MyA3Ny45ODA2IDMwLjAxMjZDODQuMzYzMiAzNi4zOTI2IDg3LjkxNjcgNDQuOTcxMyA4Ny45MTY3IDUzLjk5NjZaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTMwODBfMTc2NDUpIi8+CjwvZz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMzA4MF8xNzY0NSIgeDE9IjI0IiB5MT0iMzAuNSIgeDI9Ijc2IiB5Mj0iODQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0JBRjNGMSIvPgo8c3RvcCBvZmZzZXQ9IjAuMjIxOTYzIiBzdG9wLWNvbG9yPSIjRTFFMkY5Ii8+CjxzdG9wIG9mZnNldD0iMC40MzExMjUiIHN0b3AtY29sb3I9IiNDMUYxRTkiLz4KPHN0b3Agb2Zmc2V0PSIwLjYzODk0IiBzdG9wLWNvbG9yPSIjREJDOEYwIi8+CjxzdG9wIG9mZnNldD0iMC44MDQ5ODUiIHN0b3AtY29sb3I9IiNBQUM3RUQiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQzFDMEY1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMwODBfMTc2NDUiPgo8cmVjdCB3aWR0aD0iNjgiIGhlaWdodD0iNjgiIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMCAyMCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' as const;\n\n  get name() {\n    return this.#name;\n  }\n\n  get icon() {\n    return this.#icon;\n  }\n\n  get chains() {\n    return SOLANA_CHAINS.slice();\n  }\n\n  get features(): StandardConnectFeature &\n    StandardDisconnectFeature &\n    StandardEventsFeature &\n    SolanaSignAndSendTransactionFeature &\n    SolanaSignTransactionFeature &\n    SolanaSignMessageFeature {\n    return {\n      'standard:connect': {\n        version: '1.0.0',\n        connect: this.#connect,\n      },\n      'standard:disconnect': {\n        version: '1.0.0',\n        disconnect: this.#disconnect,\n      },\n      'standard:events': {\n        version: '1.0.0',\n        on: this._on,\n      },\n      'solana:signAndSendTransaction': {\n        version: '1.0.0',\n        supportedTransactionVersions: ['legacy'],\n        signAndSendTransaction: this.#signAndSendTransaction,\n      },\n      'solana:signTransaction': {\n        version: '1.0.0',\n        supportedTransactionVersions: ['legacy'],\n        signTransaction: this.#signTransaction,\n      },\n      'solana:signMessage': {\n        version: '1.0.0',\n        signMessage: this.#signMessage,\n      },\n    };\n  }\n\n  private options: { canvasClient: CanvasClient };\n\n  constructor(canvasClient: CanvasClient) {\n    super();\n\n    this.options = { canvasClient };\n    if (new.target === CanvasWallet) {\n      Object.freeze(this);\n    }\n  }\n\n  setCanvasClient(canvasClient: CanvasClient) {\n    this.options.canvasClient = canvasClient;\n  }\n\n  #connect: StandardConnectMethod = async ({ silent } = {}) => {\n    if (silent) return { accounts: this.accounts };\n    const canvasResponse = await this.options.canvasClient.connectWallet(\n      this.chains[0],\n    );\n\n    const isValidResponse = await validateHostMessage(canvasResponse);\n    if (!isValidResponse) {\n      throw new Error('invalid message');\n    }\n\n    if (!canvasResponse.untrusted.success) return { accounts: this.accounts };\n\n    this.#underlyingWalletName = canvasResponse.untrusted.walletName;\n    const account: WalletAccount = {\n      address: canvasResponse.untrusted.address,\n      publicKey: new PublicKey(canvasResponse.untrusted.address).toBytes(),\n      chains: SOLANA_CHAINS,\n      features: [\n        'solana:signAndSendTransaction',\n        'solana:signTransaction',\n        'solana:signMessage',\n      ],\n    };\n    this._accounts.push(account);\n\n    return { accounts: this.accounts };\n  };\n\n  #disconnect: StandardDisconnectMethod = async () => {\n    if (!this.#underlyingWalletName) throw new Error('wallet not connected');\n\n    const canvasResponse = await this.sendMessage(\n      {\n        type: 'wallet:disconnect-request',\n        payload: {\n          name: this.#underlyingWalletName,\n        },\n      },\n      CanvasInterface.disconnectResponseSchema,\n    );\n\n    if (!canvasResponse.untrusted.success) {\n      throw new Error(canvasResponse.untrusted.error);\n    }\n\n    this._accounts.splice(0, this._accounts.length);\n    this.#underlyingWalletName = undefined;\n  };\n\n  #signAndSendTransaction: SolanaSignAndSendTransactionMethod = async (\n    ...inputs\n  ) => {\n    if (!this.#underlyingWalletName) throw new Error('wallet not connected');\n\n    const outputs: SolanaSignAndSendTransactionOutput[] = [];\n    for (const { transaction, account, chain, options } of inputs) {\n      if (!account.features.includes('solana:signAndSendTransaction'))\n        throw new Error('invalid feature');\n\n      if (!this.chains.includes(chain as SolanaChain))\n        throw new Error('invalid chain');\n\n      const rpcEndpoint = getEndpointForChain(chain as SolanaChain);\n\n      const unsignedTx = bs58.encode(transaction);\n\n      const canvasResponse = await this.sendMessage(\n        {\n          type: 'wallet:send-transaction-request',\n          payload: {\n            name: this.#underlyingWalletName,\n            rpcEndpoint,\n            unsignedTx,\n            chain,\n            options,\n          },\n        },\n        CanvasInterface.sendTransactionResponseSchema,\n      );\n\n      if (!canvasResponse.untrusted.success) {\n        throw new Error(canvasResponse.untrusted.error);\n      }\n\n      outputs.push({\n        signature: bs58.decode(canvasResponse.untrusted.signedTx),\n      });\n    }\n\n    return outputs;\n  };\n\n  #signTransaction: SolanaSignTransactionMethod = async (...inputs) => {\n    if (!this.#underlyingWalletName) throw new Error('wallet not connected');\n    if (inputs.length === 0) return [];\n\n    const transactions: { chain: string | undefined; unsignedTx: string }[] =\n      [];\n    for (const { transaction, account, chain } of inputs) {\n      if (!account.features.includes('solana:signTransaction'))\n        throw new Error('invalid feature');\n\n      if (chain && !this.chains.includes(chain as SolanaChain))\n        throw new Error('invalid chain');\n      const unsignedTx = bs58.encode(transaction);\n      transactions.push({\n        unsignedTx,\n        chain,\n      });\n    }\n\n    const isSingleTransation = transactions.length === 1;\n    const canvasResponse = isSingleTransation\n      ? await this.sendMessage(\n          {\n            type: 'wallet:sign-transaction-request',\n            payload: {\n              name: this.#underlyingWalletName,\n              unsignedTx: transactions[0].unsignedTx,\n              chain: transactions[0].chain,\n            },\n          },\n          CanvasInterface.signTransactionResponseSchema,\n        )\n      : await this.sendMessage(\n          {\n            type: 'wallet:sign-all-transactions-request',\n            payload: {\n              name: this.#underlyingWalletName,\n              unsignedTxs: transactions.map((t) => t.unsignedTx),\n            },\n          },\n          CanvasInterface.signAllTransactionsResponseSchema,\n        );\n\n    if (!canvasResponse.untrusted.success) {\n      throw new Error(canvasResponse.untrusted.error);\n    }\n\n    const signedTxs =\n      'signedTx' in canvasResponse.untrusted\n        ? [canvasResponse.untrusted.signedTx]\n        : canvasResponse.untrusted.signedTxs;\n    const outputs: SolanaSignTransactionOutput[] = signedTxs.map(\n      (signedTx) => ({ signedTransaction: bs58.decode(signedTx) }),\n    );\n\n    return outputs;\n  };\n\n  #signMessage: SolanaSignMessageMethod = async (...inputs) => {\n    if (!this.#underlyingWalletName) throw new Error('wallet not connected');\n\n    const outputs: SolanaSignMessageOutput[] = [];\n    for (const { account, message } of inputs) {\n      if (!account.features.includes('solana:signMessage'))\n        throw new Error('invalid feature');\n\n      const canvasResponse = await this.sendMessage(\n        {\n          type: 'wallet:sign-message-request',\n          payload: {\n            name: this.#underlyingWalletName,\n            unsignedMessage: message,\n          },\n        },\n        CanvasInterface.signMessageResponseSchema,\n      );\n      if (!canvasResponse.untrusted.success) {\n        throw new Error(canvasResponse.untrusted.error);\n      }\n\n      outputs.push({\n        signedMessage: message,\n        signature: canvasResponse.untrusted.signedMessage,\n      });\n    }\n\n    return outputs;\n  };\n\n  private async validateResponse<T extends CanvasInterface.HostMessage>(\n    canvasResponse: T,\n  ) {\n    const isValidResponse = await validateHostMessage(canvasResponse);\n    if (!isValidResponse) {\n      throw new Error('invalid message');\n    }\n\n    const name = canvasResponse.untrusted.name;\n    if (name !== this.#underlyingWalletName) {\n      throw new Error('Unexpected wallet name');\n    }\n\n    return canvasResponse;\n  }\n\n  private async sendMessage<T extends CanvasInterface.HostMessageSchema>(\n    message: CanvasInterface.ClientMessage,\n    schema: T,\n  ) {\n    const canvasResponse =\n      await this.options.canvasClient.sendMessageAndWaitResponse(\n        message,\n        schema,\n      );\n    return await this.validateResponse(canvasResponse);\n  }\n}\n","import type {\n  StandardEventsListeners,\n  StandardEventsNames,\n  StandardEventsOnMethod,\n  Wallet,\n  WalletAccount,\n} from '@wallet-standard/core';\n\n// source: https://github.com/wallet-standard/wallet-standard/blob/master/packages/example/wallets/src/abstractWallet.ts\nexport abstract class AbstractWallet implements Wallet {\n  #listeners: { [E in StandardEventsNames]?: StandardEventsListeners[E][] } =\n    {};\n\n  protected _accounts: WalletAccount[];\n\n  get version() {\n    return '1.0.0' as const;\n  }\n\n  abstract get name(): Wallet['name'];\n  abstract get icon(): Wallet['icon'];\n  abstract get chains(): Wallet['chains'];\n  abstract get features(): Wallet['features'];\n\n  get accounts() {\n    return this._accounts.slice();\n  }\n\n  constructor() {\n    this._accounts = [];\n  }\n\n  protected _on: StandardEventsOnMethod = (event, listener) => {\n    this.#listeners[event]?.push(listener) ||\n      (this.#listeners[event] = [listener]);\n    return (): void => this._off(event, listener);\n  };\n\n  protected _emit<E extends StandardEventsNames>(\n    event: E,\n    ...args: Parameters<StandardEventsListeners[E]>\n  ): void {\n    // eslint-disable-next-line prefer-spread\n    this.#listeners[event]?.forEach((listener) => listener.apply(null, args));\n  }\n\n  protected _off<E extends StandardEventsNames>(\n    event: E,\n    listener: StandardEventsListeners[E],\n  ): void {\n    this.#listeners[event] = this.#listeners[event]?.filter(\n      (existingListener) => listener !== existingListener,\n    );\n  }\n}\n","import type { CanvasInterface } from '@dscvr-one/canvas-client-sdk';\n\nexport const validateHostMessage = async (\n  message: CanvasInterface.BaseHostMessage,\n) => {\n  // TODO: connect with graphql\n  return !!message;\n};\n"],"mappings":"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","names":["CanvasInterface","wallet"]}